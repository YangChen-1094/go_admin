(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["system"],{"295b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 系统功能 ")]),a("el-breadcrumb-item",[e._v("PHP执行")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-row",[a("el-col",{attrs:{span:2}},[e._v("php代码：")])],1),a("el-row",[a("el-col",{attrs:{span:30}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{rows:"15",cols:"200"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})])],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.doPHPRun}},[e._v("执行")])],1)],1),a("br"),a("br")],1),a("div",{staticClass:"handle-box"},[a("el-col",{attrs:{span:1}},[e._v(" 返回：")]),a("br"),a("br"),a("span",{staticStyle:{background:"#E0E0E0",color:"green"}},[e._v("执行时间："+e._s(e.runTime)+" 秒")]),a("br"),a("span",{staticStyle:{background:"#E0E0E0"},domProps:{innerHTML:e._s(e.runRet)}}),a("br")],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("查询日志：")]),a("el-date-picker",{attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.logYmd,callback:function(t){e.logYmd=t},expression:"logYmd"}}),a("el-button",{on:{click:function(t){return e.getLogData()}}},[e._v("查询")])],1)]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.table_data,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"日期",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Ymd))]}}])}),a("el-table-column",{attrs:{label:"时间",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.His))]}}])}),a("el-table-column",{attrs:{label:"操作者ip",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ip))]}}])}),a("el-table-column",{attrs:{label:"执行内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.code))]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.page_total},on:{"current-change":e.handlePageChange}})],1)],1)])},l=[],r=a("b775");a("c1df");function s(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,l=t.getDate();n<10&&(n="0"+n),l<10&&(l="0"+l);var r=a+n+l;return r}var o={name:"logList",data:function(){return{query:{page_index:1,page_size:20,operator:""},page_total:0,table_data:[],code:"",logYmd:"",runTime:0,runRet:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},created:function(){this.getLogData()},methods:{getLogData:function(){var e=this,t=[s(this.logYmd[0]),s(this.logYmd[1])];r["a"].post("./phpLogList",{logYmd:t}).then((function(t){var a=t.data.length;200==t.code&&a&&(e.table_data=t.data)}))},doPHPRun:function(){var e=this,t=this.code;if(t=t.trim(),!t)return this.$message.error("操作失败,请勿输入空代码！"),!1;r["a"].post("./phpRunCode",{code:this.code}).then((function(t){if(t){t.data;t.code&&200!=t.code?e.$message({message:t.msg,type:"warning"}):t.code&&200==t.code?(e.$message({message:"操作成功",type:"success"}),e.runRet=t.data.info,e.runTime=t.data.runtime):e.$message({message:"可能语法错误，请仔细检查",type:"warning"})}else e.$message.error("操作失败,请仔细检查代码")}))},handleSearch:function(){this.getLogData()},handlePageChange:function(e){this.$set(this.query,"page_index",e),this.getData()}}},i=o,c=a("2877"),d=Object(c["a"])(i,n,l,!1,null,null,null);t["default"]=d.exports},"349f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 系统功能 ")]),a("el-breadcrumb-item",[e._v("操作日志查询")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("操作者账号")])]),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"输入操作人的账号id"},model:{value:e.query.operator,callback:function(t){e.$set(e.query,"operator",t)},expression:"query.operator"}})],1)],1),a("div",{staticStyle:{margin:"10px 0px"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查询")])],1)]),a("div",{staticClass:"container"},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.table_data,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"id",label:"id",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}),a("el-table-column",{attrs:{label:"操作人",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.operator))]}}])}),a("el-table-column",{attrs:{label:"模块",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.module))]}}])}),a("el-table-column",{attrs:{label:"内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.log))]}}])}),a("el-table-column",{attrs:{label:"操作者ip",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ip))]}}])}),a("el-table-column",{attrs:{label:"操作时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.update_time))]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.page_index,"page-size":e.query.page_size,total:e.page_total},on:{"current-change":e.handlePageChange}})],1)],1)])},l=[],r=(a("ac6a"),a("b775")),s=a("c1df"),o={name:"logList",data:function(){return{query:{page_index:1,page_size:20,operator:""},page_total:0,table_data:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this;r["a"].post("./logList",this.query).then((function(t){200==t.code&&(t.data.list.forEach((function(e,a){t.data.list[a]["update_time"]=s(1e3*e.add_time).format("YYYY-MM-DD HH:mm:ss")})),e.table_data=t.data.list,e.page_total=parseInt(t.data.page_total))}))},handleSearch:function(){this.getData()},handlePageChange:function(e){this.$set(this.query,"page_index",e),this.getData()}}},i=o,c=a("2877"),d=Object(c["a"])(i,n,l,!1,null,null,null);t["default"]=d.exports}}]);